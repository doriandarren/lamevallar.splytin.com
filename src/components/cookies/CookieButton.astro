<button id="cookie-btn" class="fixed bottom-4 right-4 z-50 px-4 py-2 rounded-full bg-blue-600 text-white shadow-lg">
  üç™ Cookies
</button>

<div id="cookie-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-xl max-w-sm w-full flex flex-col gap-4">
    <p class="font-bold text-lg text-center">Configuraci√≥n de Cookies</p>
    <label class="flex gap-2">
      <input type="checkbox" id="analytics"> Cookies de Anal√≠tica
    </label>
    <label class="flex gap-2">
      <input type="checkbox" id="marketing"> Cookies de Marketing
    </label>
    <div class="flex flex-wrap gap-2 justify-center mt-3">
      <button id="accept-all" class="bg-green-500 text-white px-3 py-2 rounded">Aceptar Todo</button>
      <button id="save-preferences" class="bg-blue-500 text-white px-3 py-2 rounded">Guardar</button>
      <button id="reject-all" class="bg-red-500 text-white px-3 py-2 rounded">Rechazar Todo</button>
    </div>
  </div>
</div>

<script type="module">
  const cookieBtn = document.getElementById('cookie-btn');
  const cookieModal = document.getElementById('cookie-modal');
  const analytics = document.getElementById('analytics');
  const marketing = document.getElementById('marketing');
  const acceptAll = document.getElementById('accept-all');
  const rejectAll = document.getElementById('reject-all');
  const savePrefs = document.getElementById('save-preferences');

  function setCookie(name, value) {
    document.cookie = `${name}=${value}; path=/; max-age=31536000`;
  }

  function closeModal() {
    cookieModal.classList.add('hidden');
    cookieBtn.classList.remove('hidden');
  }

  function openModal() {
    cookieModal.classList.remove('hidden');
    cookieBtn.classList.add('hidden');
  }

  cookieBtn?.addEventListener('click', openModal);

  acceptAll?.addEventListener('click', () => {
    setCookie("cookie_consent", "all");
    setCookie("analytics", true);
    setCookie("marketing", true);
    closeModal();
  });

  rejectAll?.addEventListener('click', () => {
    setCookie("cookie_consent", "none");
    setCookie("analytics", false);
    setCookie("marketing", false);
    closeModal();
  });

  savePrefs?.addEventListener('click', () => {
    setCookie("cookie_consent", "preferences");
    setCookie("analytics", analytics.checked);
    setCookie("marketing", marketing.checked);
    closeModal();
  });

  if (document.cookie.includes('cookie_consent=')) {
    cookieBtn?.classList.add('hidden');
  } else {
    cookieBtn?.classList.remove('hidden');
  }
</script>
